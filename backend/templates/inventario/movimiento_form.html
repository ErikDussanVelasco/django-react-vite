{% extends 'inventario/base.html' %}
{% block title %}Nuevo Movimiento - Stock Master{% endblock %}
{% block page_title %}Registrar Movimiento{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="mb-6">
        <h2 class="text-2xl font-bold text-gray-800 flex items-center">
            <span class="mr-3">‚ÜîÔ∏è</span>Registrar Movimiento de Inventario
        </h2>
    </div>

    <div class="bg-white rounded-xl shadow-lg p-8">
        <form method="post" class="space-y-6">
            {% csrf_token %}

            <!-- Producto -->
            <div>
                <label for="producto_id" class="block text-sm font-semibold text-gray-700 mb-2">
                    <span class="text-red-500">*</span> Producto
                </label>
                <select 
                    id="producto_id" 
                    name="producto_id" 
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                    required
                >
                    <option value="">-- Selecciona un producto --</option>
                    {% for prod in productos %}
                    <option value="{{ prod.id }}">
                        {{ prod.nombre }} (Stock: {{ prod.stock }}) - C√≥digo: {{ prod.codigo }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Tipo de Movimiento -->
            <div>
                <label for="tipo" class="block text-sm font-semibold text-gray-700 mb-2">
                    <span class="text-red-500">*</span> Tipo de Movimiento
                </label>
                <select 
                    id="tipo" 
                    name="tipo" 
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                    required
                >
                    <option value="">-- Selecciona un tipo --</option>
                    <option value="ENTRADA" class="text-green-600">üì• ENTRADA (Compra/Devoluci√≥n)</option>
                    <option value="SALIDA" class="text-red-600">üì§ SALIDA (Venta/P√©rdida)</option>
                </select>
            </div>

            <!-- Cantidad -->
            <div>
                <label for="cantidad" class="block text-sm font-semibold text-gray-700 mb-2">
                    <span class="text-red-500">*</span> Cantidad
                </label>
                <input 
                    type="number" 
                    id="cantidad" 
                    name="cantidad" 
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                    placeholder="Ej: 10"
                    min="1"
                    required
                >
            </div>

            <!-- N√∫mero de Referencia -->
            <div>
                <label for="numero_referencia" class="block text-sm font-semibold text-gray-700 mb-2">
                    N√∫mero de Referencia (Opcional)
                </label>
                <input 
                    type="text" 
                    id="numero_referencia" 
                    name="numero_referencia" 
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                    placeholder="Ej: OC-2025-001, FAC-2025-050"
                >
                <p class="text-gray-500 text-xs mt-1">Para seguimiento de compras, ventas o devoluciones</p>
            </div>

            <!-- Botones -->
            <div class="flex gap-4 pt-6 border-t border-gray-200">
                <button 
                    type="submit" 
                    class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition flex items-center justify-center"
                >
                    <span class="mr-2">‚úÖ</span>Registrar Movimiento
                </button>
                <a 
                    href="{% url 'inventario_dashboard' %}" 
                    class="flex-1 bg-gray-400 hover:bg-gray-500 text-white py-3 rounded-lg font-semibold text-center transition flex items-center justify-center"
                >
                    <span class="mr-2">‚ùå</span>Cancelar
                </a>
            </div>
        </form>
    </div>

    <!-- Informaci√≥n Box -->
    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Info ENTRADA -->
        <div class="bg-green-50 border border-green-200 rounded-lg p-6">
            <h3 class="font-semibold text-green-900 mb-2 flex items-center">
                <span class="mr-2 text-2xl">üì•</span>ENTRADA
            </h3>
            <p class="text-sm text-green-800 mb-3">Cuando el stock ingresa al almac√©n:</p>
            <ul class="text-sm text-green-700 space-y-1">
                <li>‚úì Compra de nuevos productos</li>
                <li>‚úì Devoluciones de clientes</li>
                <li>‚úì Trasferencias de otros almacenes</li>
            </ul>
        </div>

        <!-- Info SALIDA -->
        <div class="bg-red-50 border border-red-200 rounded-lg p-6">
            <h3 class="font-semibold text-red-900 mb-2 flex items-center">
                <span class="mr-2 text-2xl">üì§</span>SALIDA
            </h3>
            <p class="text-sm text-red-800 mb-3">Cuando el stock sale del almac√©n:</p>
            <ul class="text-sm text-red-700 space-y-1">
                <li>‚úì Ventas a clientes</li>
                <li>‚úì P√©rdida o da√±o de productos</li>
                <li>‚úì Devoluciones a proveedores</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
