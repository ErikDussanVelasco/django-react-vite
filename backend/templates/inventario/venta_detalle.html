{% extends "inventario/base.html" %}
{% block title %}Venta {{ venta.id }}{% endblock %}
{% block page_title %}Venta #{{ venta.id }}{% endblock %}

{% block content %}

<div class="bg-white p-6 rounded-xl shadow max-w-2xl mx-auto">

    <p class="text-gray-600 mb-4">Fecha: {{ venta.fecha }}</p>

    <p class="text-gray-600 mb-2">MÃ©todo de pago: <strong>{{ venta.metodo_pago }}</strong></p>
    <p class="text-gray-600 mb-2">Monto recibido: ${{ venta.monto_recibido }}</p>
    <p class="text-gray-600 mb-4">Cambio: ${{ venta.cambio }}</p>

    <table class="w-full">
        <thead class="bg-gray-100 border-b">
            <tr>
                <th class="px-3 py-2">Producto</th>
                <th class="px-3 py-2">Cantidad</th>
                <th class="px-3 py-2">Precio</th>
                <th class="px-3 py-2">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for item in venta.detalles.all %}
            <tr class="border-b">
                <td class="px-3 py-2">{{ item.producto.nombre }}</td>
                <td class="px-3 py-2">{{ item.cantidad }}</td>
                <td class="px-3 py-2">${{ item.precio_unitario }}</td>
                <td class="px-3 py-2">${{ item.subtotal }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="mt-6 text-right">

        <p>Total bruto: ${{ venta.total }}</p>

        <p>Descuento: <span class="text-red-600">-${{ venta.descuento_general }}</span></p>

        <p>IVA ({{ venta.iva_porcentaje }}%): ${{ venta.iva_total }}</p>

        <hr class="my-2">

        <h2 class="text-2xl font-bold">TOTAL FINAL: ${{ venta.total_final }}</h2>
    </div>

    <div class="text-right mt-4">
        <a href="{% url 'venta_factura_pdf' venta.id %}"
           class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
            ðŸ§¾ Descargar Factura
        </a>
    </div>

</div>

{% endblock %}